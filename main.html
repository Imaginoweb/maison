<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vos envies d√©co ‚Äì Maisons du Monde</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: #f6f6f6;
            color: #3c3c3b;
            line-height: 1.6;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 20px;
            border-bottom: 1px solid #e8e4df;
        }
        .logo { width: 150px; height: auto; }

        /* Page Title */
        .page-title {
            text-align: center;
            padding: 40px 20px 10px;
        }
        .page-title h1 {
            font-family: Georgia, 'Times New Roman', serif;
            font-size: 26px;
            font-weight: 400;
            color: #3c3c3b;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
        }
        .page-title p {
            font-size: 14px;
            color: #6b6b6b;
            max-width: 440px;
            margin: 0 auto;
        }

        /* Badge IA */
        .ai-badge {
            text-align: center;
            padding: 15px 20px 30px;
        }
        .ai-badge span {
            display: inline-block;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #9a9a9a;
            background: #f7f6f3;
            padding: 5px 14px;
            border-radius: 20px;
        }

        /* Form */
        .form-section { padding: 0 30px 30px; }

        .section-title {
            font-family: Georgia, 'Times New Roman', serif;
            font-size: 18px;
            font-weight: 400;
            color: #3c3c3b;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3c3c3b;
        }

        .form-group { margin-bottom: 20px; }
        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #3c3c3b;
            margin-bottom: 8px;
        }
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            font-size: 14px;
            font-family: Arial, Helvetica, sans-serif;
            border: 1px solid #e8e4df;
            border-radius: 4px;
            background-color: #fafafa;
            color: #3c3c3b;
            transition: border-color 0.3s ease;
            -webkit-appearance: none;
        }
        .form-group select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%233c3c3b' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 14px center;
            padding-right: 40px;
        }
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3c3c3b;
            background-color: #ffffff;
        }

        .form-hint {
            font-size: 12px;
            color: #9a9a9a;
            margin-top: 5px;
            font-style: italic;
        }

        /* Preference items / checkboxes */
        .preference-item {
            display: flex;
            align-items: flex-start;
            padding: 15px;
            margin-bottom: 10px;
            background-color: #f7f6f3;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .preference-item:hover { background-color: #edecea; }
        .preference-item input[type="checkbox"],
        .preference-item input[type="radio"] {
            width: 20px; height: 20px;
            margin-right: 15px; margin-top: 2px;
            accent-color: #3c3c3b;
            cursor: pointer;
            flex-shrink: 0;
        }
        .preference-content { flex: 1; }
        .preference-content strong {
            display: block; font-size: 14px;
            color: #3c3c3b; margin-bottom: 4px;
        }
        .preference-content span {
            font-size: 13px; color: #6b6b6b;
        }

        /* Frequency / radio cards */
        .card-options {
            display: flex; gap: 10px; flex-wrap: wrap;
        }
        .card-option { flex: 1; min-width: 120px; }
        .card-option input[type="radio"] { display: none; }
        .card-option label {
            display: block; text-align: center;
            padding: 18px 10px;
            background-color: #f7f6f3;
            border: 2px solid transparent;
            border-radius: 4px; cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px; font-weight: 600;
        }
        .card-option input[type="radio"]:checked + label {
            background-color: #3c3c3b;
            color: #ffffff;
            border-color: #3c3c3b;
        }
        .card-option label:hover { border-color: #3c3c3b; }

        /* Divider */
        .divider {
            height: 1px;
            background-color: #e8e4df;
            margin: 30px 0;
        }

        /* Channels section */
        .channels-section { padding: 0 30px 30px; }

        /* Button */
        .btn-container {
            text-align: center;
            padding: 10px 30px 40px;
        }
        .btn-primary {
            display: inline-block;
            padding: 16px 50px;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 14px; font-weight: 600;
            color: #ffffff;
            background-color: #3c3c3b;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: none; border-radius: 0;
            cursor: pointer;
            transition: background-color 0.3s ease;
            width: 100%;
            max-width: 400px;
        }
        .btn-primary:hover { background-color: #2a2a2a; }

        /* RGPD */
        .rgpd-notice {
            padding: 0 30px 30px;
            font-size: 11px;
            color: #9a9a9a;
            line-height: 1.5;
        }
        .rgpd-notice a { color: #3c3c3b; }

        /* Footer */
        .footer {
            text-align: center;
            padding: 30px 20px;
            border-top: 1px solid #e8e4df;
        }
        .footer p { font-size: 12px; color: #6b6b6b; margin-bottom: 10px; }
        .footer a { color: #3c3c3b; text-decoration: none; }
        .footer a:hover { text-decoration: underline; }

        @media screen and (max-width: 480px) {
            .form-section, .channels-section { padding: 0 20px 20px; }
            .page-title { padding: 30px 20px 10px; }
            .page-title h1 { font-size: 22px; }
            .card-options { flex-direction: column; }
            .card-option { min-width: 100%; }
            .btn-container { padding: 10px 20px 30px; }
        }
    </style>
</head>
<body>
<div class="container">

    <!-- Header -->
    <div class="header">
        <img src="https://maisonsdumonde.emsecure.net/images/Newsletters/2026/01_Janvier/22_LCT_NOUVEAUTES_AVP_WEB_FR_IT_ES/FRV2/1.png"
             alt="Maisons du Monde" class="logo">
    </div>

    <!-- Title -->
    <div class="page-title">
        <h1 id="mdm-main-title">Parlez-nous de vos envies d√©co</h1>
        <p>Aidez-nous √† mieux vous conna√Ætre pour vous proposer les nouveaut√©s et inspirations qui vous ressemblent.</p>
    </div>

    <div class="ai-badge"><span>‚ú¶ Formulaire g√©n√©r√© par IA</span></div>

    <form id="mdm-form" action="#" method="post" onsubmit="return false;">

        <!-- Informations -->
        <div class="form-section">
            <h2 class="section-title">Vos coordonn√©es</h2>

            <div class="form-group">
                <label for="email">Adresse e-mail</label>
                <input type="email" id="email" name="email"
                       value="lucie.martin@maisonsdumonde.com"
                       placeholder="Votre adresse e-mail">
            </div>
            <div class="form-group">
                <label for="firstname">Pr√©nom</label>
                <input type="text" id="firstname" name="firstname"
                       value="Lucie" placeholder="Votre pr√©nom">
            </div>
            <div class="form-group">
                <label for="lastname">Nom</label>
                <input type="text" id="lastname" name="lastname"
                       value="Martin" placeholder="Votre nom">
            </div>
            <div class="form-group">
                <label for="mobile">Num√©ro de t√©l√©phone</label>
                <input type="text" id="mobile" name="mobile"
                       value="" placeholder="06 12 34 56 78">
            </div>
        </div>

        <div class="divider"></div>

        <!-- Pi√®ce principale -->
        <div class="form-section">
            <h2 class="section-title">Votre projet d√©co</h2>

            <div class="form-group">
                <label for="piece">Quelle pi√®ce souhaitez-vous am√©nager ?</label>
                <select id="piece" name="piece">
                    <option value="" disabled>S√©lectionnez une pi√®ce</option>
                    <option value="salon" selected>Salon & S√©jour</option>
                    <option value="chambre">Chambre</option>
                    <option value="cuisine">Cuisine & Salle √† manger</option>
                    <option value="bureau">Bureau</option>
                    <option value="jardin">Jardin & Ext√©rieur</option>
                    <option value="sdb">Salle de bain</option>
                    <option value="enfant">Chambre d'enfant</option>
                </select>
            </div>

            <div class="form-group">
                <label>Quel style vous inspire ?</label>
                <div class="card-options">
                    <div class="card-option">
                        <input type="radio" name="style" id="style-boheme" value="boheme" checked>
                        <label for="style-boheme">üåø<br>Boh√®me</label>
                    </div>
                    <div class="card-option">
                        <input type="radio" name="style" id="style-contemporain" value="contemporain">
                        <label for="style-contemporain">‚óªÔ∏è<br>Contemporain</label>
                    </div>
                    <div class="card-option">
                        <input type="radio" name="style" id="style-ethnique" value="ethnique">
                        <label for="style-ethnique">üåç<br>Ethnique</label>
                    </div>
                    <div class="card-option">
                        <input type="radio" name="style" id="style-classique" value="classique">
                        <label for="style-classique">üèõÔ∏è<br>Classique</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="budget">Budget indicatif</label>
                <select id="budget" name="budget">
                    <option value="" disabled>S√©lectionnez un budget</option>
                    <option value="small">Moins de 500 ‚Ç¨</option>
                    <option value="medium" selected>500 ‚Ç¨ ‚Äì 1 500 ‚Ç¨</option>
                    <option value="large">1 500 ‚Ç¨ ‚Äì 3 000 ‚Ç¨</option>
                    <option value="premium">Plus de 3 000 ‚Ç¨</option>
                </select>
            </div>

            <div class="form-group">
                <label>C'est pour quand ?</label>
                <div class="card-options">
                    <div class="card-option">
                        <input type="radio" name="timing" id="timing-now" value="now" checked>
                        <label for="timing-now">üî•<br>C'est imm√©diat</label>
                    </div>
                    <div class="card-option">
                        <input type="radio" name="timing" id="timing-soon" value="soon">
                        <label for="timing-soon">üìÖ<br>Dans les 3 mois</label>
                    </div>
                    <div class="card-option">
                        <input type="radio" name="timing" id="timing-inspi" value="inspiration">
                        <label for="timing-inspi">üí°<br>Je m'inspire</label>
                    </div>
                </div>
                <p class="form-hint">Nous adapterons la fr√©quence de nos communications en fonction.</p>
            </div>
        </div>

        <div class="divider"></div>

        <!-- Canaux de communication -->
        <div class="channels-section" id="mdm-channels-section">
            <h2 class="section-title">Comment souhaitez-vous √™tre contact√©(e) ?</h2>

            <label class="preference-item">
                <input type="checkbox" name="channels[]" value="email" checked>
                <div class="preference-content">
                    <strong>E-mail</strong>
                    <span>Inspirations, nouveaut√©s, offres personnalis√©es</span>
                </div>
            </label>

            <label class="preference-item">
                <input type="checkbox" name="channels[]" value="sms">
                <div class="preference-content">
                    <strong>SMS</strong>
                    <span>Alertes ventes priv√©es et offres flash</span>
                </div>
            </label>

            <!-- WhatsApp opt-in (inject√© dynamiquement) -->
            <label class="preference-item" id="mdm-whatsapp-optin">
                <input type="checkbox" name="channels[]" value="whatsapp">
                <div class="preference-content">
                    <strong style="color:#25D366;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="#25D366" style="vertical-align:middle;margin-right:6px;"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                        WhatsApp
                    </strong>
                    <span>Recevez nos bons plans et alertes exclusives directement sur WhatsApp</span>
                </div>
            </label>
        </div>

        <!-- Bouton -->
        <div class="btn-container">
            <button type="submit" class="btn-primary">VALIDER MES PR√âF√âRENCES</button>
        </div>
    </form>

    <!-- RGPD -->
    <div class="rgpd-notice">
        En validant ce formulaire, vous acceptez de recevoir des communications personnalis√©es de Maisons du Monde.
        Vous pouvez modifier vos pr√©f√©rences ou vous d√©sinscrire √† tout moment.
        <a href="#">Politique de confidentialit√©</a>.
    </div>

    <!-- Footer -->
    <div class="footer">
        <p style="font-size:11px;">
            MAISONS DU MONDE FRANCE SAS ‚Äì 8 rue Marie Curie, 44120 Vertou<br>
            RCS Nantes 383 196 656
        </p>
        <p style="margin-top:10px;">¬© Maisons du Monde</p>
    </div>
</div>

<script>
(function() {
    const API_URL = 'https://francois-sandbox.saas.imagino.com/ucdapi/API_CAMPAGNE_MDM/1/UCR_MDM_France';
    const API_KEY = '0cfe1225-a2f7-43b9-9645-caebdaf5a971';

    const form = document.getElementById('mdm-form');
    const submitBtn = form.querySelector('.btn-primary');

    submitBtn.addEventListener('click', async function(e) {
        e.preventDefault();

        // R√©cup√©rer les valeurs du formulaire
        const email = document.getElementById('email').value;
        const firstName = document.getElementById('firstname').value;
        const lastName = document.getElementById('lastname').value;
        const mobile = document.getElementById('mobile').value;
        const piece = document.getElementById('piece').value;
        const budget = document.getElementById('budget').value;
        const style = document.querySelector('input[name="style"]:checked')?.value || '';
        const timing = document.querySelector('input[name="timing"]:checked')?.value || '';

        // Opt-ins canaux
        const channels = Array.from(document.querySelectorAll('input[name="channels[]"]:checked')).map(c => c.value);
        const optInEmail = channels.includes('email');
        const optInSMS = channels.includes('sms');
        const optInWhatsApp = channels.includes('whatsapp');

        // Construire le payload API
        const payload = {
            email: email,
            firstName: firstName,
            lastName: lastName,
            mobile: mobile,
            language: 'fr',
            country: 'FR',
            origin: 'formulaire_preferences_deco',
            optInEmail: optInEmail,
            optInSMS: optInSMS,
            optInWhatsApp: optInWhatsApp
        };

        // Feedback visuel
        const originalText = submitBtn.textContent;
        submitBtn.textContent = 'ENVOI EN COURS...';
        submitBtn.style.opacity = '0.7';
        submitBtn.disabled = true;

        try {
            const response = await fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Api-Key': API_KEY
                },
                body: JSON.stringify(payload)
            });

            if (response.ok) {
                const data = await response.json();
                console.log('[MDM API] ‚úÖ Profil cr√©√©/mis √† jour:', data);

                submitBtn.textContent = '‚úì PR√âF√âRENCES ENREGISTR√âES';
                submitBtn.style.backgroundColor = '#2e7d32';
                submitBtn.style.opacity = '1';

                setTimeout(() => {
                    submitBtn.textContent = originalText;
                    submitBtn.style.backgroundColor = '#3c3c3b';
                    submitBtn.disabled = false;
                }, 3000);
            } else {
                const errText = await response.text();
                console.error('[MDM API] ‚ùå Erreur:', response.status, errText);

                submitBtn.textContent = '‚úó ERREUR ‚Äì R√âESSAYER';
                submitBtn.style.backgroundColor = '#c62828';
                submitBtn.style.opacity = '1';

                setTimeout(() => {
                    submitBtn.textContent = originalText;
                    submitBtn.style.backgroundColor = '#3c3c3b';
                    submitBtn.disabled = false;
                }, 3000);
            }
        } catch (err) {
            console.error('[MDM API] ‚ùå Erreur r√©seau:', err);

            submitBtn.textContent = '‚úó ERREUR R√âSEAU';
            submitBtn.style.backgroundColor = '#c62828';
            submitBtn.style.opacity = '1';

            setTimeout(() => {
                submitBtn.textContent = originalText;
                submitBtn.style.backgroundColor = '#3c3c3b';
                submitBtn.disabled = false;
            }, 3000);
        }
    });
})();
</script>
</body>
</html>
